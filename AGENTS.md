# Repository Guidelines

## Project Structure & Module Organization
- Root: Sanity Studio config and schemas (`sanity.config.js`, `sanity.cli.ts`, `schema/`, `deskStructure.js`).
- Site (Astro): Frontend lives in `site/` with source in `site/src/` (`components/`, `pages/`, `lib/`, `layouts/`, `styles/`, `config/`).
- Shared utilities: `components/` (Studio), `utils/` (parsers/helpers), `seed/` (sample content).
- Build output: `dist/` (generated by `site` build and copied to repo root).
- Config: `.env` (local), `.env.example` (template), `vercel.json` (deployment).

## Build, Test, and Development Commands
- `npm run dev`: Start Sanity Studio locally.
- `npm run start`: Start Studio in production mode.
- `npm run build`: Build the Astro site (`site/`) and copy `site/dist` to root `dist/`.
- `npm run deploy` / `npm run deploy:studio`: Deploy Sanity Studio.
- `npm run deploy-graphql`: Deploy Sanity GraphQL API.
- `npm run typecheck`: TypeScript checks across the repo.
- Site-only: `cd site && npm run dev|build|preview` to work on the Astro app.

## Coding Style & Naming Conventions
- Use Prettier (2-space indent, single quotes where applicable). Run your editorâ€™s Prettier integration.
- TypeScript for `site/src/**` where possible; keep Sanity schemas in JS as currently structured.
- Naming: Astro components PascalCase (e.g., `Navbar.astro`), utilities camelCase (e.g., `sanityImage.ts`), schemas singular nouns (e.g., `article.js`).
- Keep functions small and pure; colocate component-only helpers next to components.

## Testing Guidelines
- No formal unit test runner configured. Validate via:
  - `npm run typecheck` for types.
  - Manual E2E checks: Studio (`npm run dev`), Site (`cd site && npm run dev`).
- If introducing critical logic, prefer lightweight, isolated tests (Vitest) under `site/` only; coordinate before adding new tooling. Name tests `*.spec.ts`.

## Commit & Pull Request Guidelines
- Commits: concise, imperative; prefer Conventional Commit prefixes (`feat:`, `fix:`, `chore:`) when practical.
- Branches: `feat/<scope>`, `fix/<scope>`, `chore/<scope>`.
- PRs must include: clear description, linked issue (if any), screenshots/recordings for UI changes, notes on i18n and SEO impact, and steps to reproduce/verify.

## Security & Configuration Tips
- Never commit secrets; use `.env` and update `.env.example` when adding vars.
- Sanity: ensure correct `projectId`, dataset, and token scopes.
- Review `vercel.json` and Astro adapter settings before deploying.

## Agent-Specific Notes
- Follow these guidelines for any changes in this repo. Prefer minimal, surgical edits; update docs when behavior changes.
