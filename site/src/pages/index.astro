---
import Layout from '../layouts/Layout.astro'
import Hero from '../components/Hero.astro'
import AdSense from '../components/AdSense.astro'
import ArticleCard from '../components/ArticleCard.astro'
import { getArticles, type Article } from '../lib/sanity'

let articles: Article[] = []
try {
  articles = await getArticles('ja')
} catch (error) {
  console.error('Failed to fetch articles:', error)
}
---

<Layout 
  title="æ—…ãƒ­ã‚° - æ—¥æœ¬å…¨å›½ã®æ—…è¨˜éŒ²" 
  description="æ—¥æœ¬å…¨å›½ã®æ—…ãƒ­ã‚°ã‚’å¤šè¨€èªã§ç™ºä¿¡ã™ã‚‹ãƒ–ãƒ­ã‚°ã€‚å„åœ°ã®é­…åŠ›ã‚’å†™çœŸã¨æ–‡ç« ã§ãŠå±Šã‘ã—ã¾ã™ã€‚"
>
  <!-- Hero Section -->
  <Hero lang="ja" />

  <div class="max-w-7xl mx-auto px-4 py-16 space-y-16">
    <!-- Articles Section -->
    <section id="articles" class="relative">
      <!-- Background decoration -->
      <div class="absolute top-0 left-1/2 transform -translate-x-1/2 w-px h-20 bg-gradient-to-b from-primary-400 to-transparent"></div>
      
      <div class="text-center mb-16">
        <div class="relative inline-block">
          <h2 class="text-5xl md:text-6xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-gray-900 via-brand-600 to-accent-600 mb-6 tracking-tight">
            æœ€æ–°ã®æ—…è¨˜éŒ²
          </h2>
          <!-- Animated underline -->
          <div class="absolute -bottom-2 left-1/2 transform -translate-x-1/2 w-32 h-1 bg-gradient-to-r from-primary-400 via-accent-400 to-sunset-400 rounded-full animate-pulse"></div>
        </div>
        <p class="mt-8 text-xl md:text-2xl text-gray-600 max-w-3xl mx-auto leading-relaxed font-medium">
          <span class="bg-gradient-to-r from-primary-600 to-accent-600 bg-clip-text text-transparent font-semibold">æ—¥æœ¬å„åœ°</span>ã®ç¾ã—ã„æ™¯è‰²ã¨ä½“é¨“ã‚’ãŠå±Šã‘
        </p>
        
        <!-- Decorative elements -->
        <div class="flex justify-center items-center mt-8 space-x-4">
          <div class="w-2 h-2 bg-primary-400 rounded-full animate-bounce"></div>
          <div class="w-3 h-3 bg-accent-400 rounded-full animate-bounce" style="animation-delay: 0.1s;"></div>
          <div class="w-2 h-2 bg-sunset-400 rounded-full animate-bounce" style="animation-delay: 0.2s;"></div>
        </div>
      </div>
      
      {articles.length === 0 ? (
        <div class="text-center py-16 bg-white rounded-2xl shadow-lg border border-gray-100">
          <div class="text-6xl mb-4">ğŸ“</div>
          <p class="text-gray-500 text-xl mb-2">ã¾ã è¨˜äº‹ãŒã‚ã‚Šã¾ã›ã‚“</p>
          <p class="text-gray-400">Sanity Studio ã§æœ€åˆã®è¨˜äº‹ã‚’ä½œæˆã—ã¦ãã ã•ã„</p>
        </div>
      ) : (
        <div class="columns-1 sm:columns-2 lg:columns-3 gap-6">
          {articles.map((article) => (
            <ArticleCard article={article} lang="ja" />
          ))}
        </div>
      )}
    </section>

    <!-- Google AdSense åºƒå‘Š -->
    <AdSense 
      slot="homepage-bottom"
      format="banner"
      lang="ja"
      className="mt-16"
    />
  </div>
</Layout>

<style>
  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>
