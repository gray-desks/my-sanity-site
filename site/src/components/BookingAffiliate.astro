---
export interface Props {
  lang: 'ja' | 'en'
  destination?: string
  checkIn?: string
  checkOut?: string
}

const { 
  lang = 'ja', 
  destination = '',
  checkIn = '',
  checkOut = ''
} = Astro.props

const affiliateId = import.meta.env.PUBLIC_BOOKING_AFFILIATE_ID || 'your-booking-affiliate-id'

// Booking.com URLæ§‹ç¯‰
const bookingUrl = new URL('https://www.booking.com/searchresults.html')
bookingUrl.searchParams.set('aid', affiliateId)
bookingUrl.searchParams.set('lang', lang)
if (destination) bookingUrl.searchParams.set('ss', destination)
if (checkIn) bookingUrl.searchParams.set('checkin', checkIn)
if (checkOut) bookingUrl.searchParams.set('checkout', checkOut)

const texts = {
  ja: {
    title: 'ğŸ¨ ã“ã®æ—…è¡Œã«ãŠã™ã™ã‚ã®å®¿æ³Šæ–½è¨­',
    subtitle: 'Booking.com ã§æœ€é©ãªå®¿æ³Šå…ˆã‚’è¦‹ã¤ã‘ã‚ˆã†',
    cta: 'å®¿æ³Šæ–½è¨­ã‚’æ¤œç´¢',
    features: [
      'âœ“ ç„¡æ–™ã‚­ãƒ£ãƒ³ã‚»ãƒ«å¯èƒ½ãªå®¿æ³Šæ–½è¨­å¤šæ•°',
      'âœ“ ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¤ã‚¹ä¿è¨¼',
      'âœ“ å®¿æ³Šè€…ã®å®Ÿéš›ã®å£ã‚³ãƒŸ'
    ]
  },
  en: {
    title: 'ğŸ¨ Recommended Accommodations',
    subtitle: 'Find the perfect place to stay with Booking.com',
    cta: 'Search Hotels',
    features: [
      'âœ“ Free cancellation on most properties',
      'âœ“ Best Price Guarantee',
      'âœ“ Real guest reviews'
    ]
  }
}

const t = texts[lang]
---

<section class="bg-gradient-to-br from-blue-50 to-indigo-100 border border-blue-200 rounded-xl p-6 mb-8">
  <div class="text-center mb-6">
    <h3 class="text-xl font-bold text-blue-900 mb-2">{t.title}</h3>
    <p class="text-blue-700">{t.subtitle}</p>
  </div>

  <div class="bg-white rounded-lg p-6 shadow-sm">
    <div class="grid gap-4 md:grid-cols-2 items-center">
      <!-- Features -->
      <div class="space-y-2">
        {t.features.map(feature => (
          <div class="flex items-center text-sm text-gray-700">
            <span class="text-green-600 mr-2">{feature.split(' ')[0]}</span>
            <span>{feature.substring(2)}</span>
          </div>
        ))}
      </div>

      <!-- CTA Button -->
      <div class="text-center">
        <a 
          href={bookingUrl.toString()}
          target="_blank"
          rel="noopener noreferrer sponsored"
          class="inline-block bg-blue-600 hover:bg-blue-700 text-white font-semibold px-6 py-3 rounded-lg transition-colors shadow hover:shadow-lg"
        >
          {t.cta}
        </a>
        <p class="text-xs text-gray-500 mt-2">
          {lang === 'ja' ? 'â€» ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ãƒªãƒ³ã‚¯ã§ã™' : 'â€» Partner link'}
        </p>
      </div>
    </div>
  </div>

  <!-- Booking.com ãƒ­ã‚´ãƒ»ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆ -->
  <div class="text-center mt-4">
    <p class="text-xs text-gray-500">
      Powered by 
      <a 
        href="https://www.booking.com" 
        target="_blank" 
        rel="noopener noreferrer"
        class="text-blue-600 hover:text-blue-700 font-medium"
      >
        Booking.com
      </a>
    </p>
  </div>
</section>