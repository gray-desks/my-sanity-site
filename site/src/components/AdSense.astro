---
export interface Props {
  slot?: string
  format?: 'auto' | 'rectangle' | 'banner'
  className?: string
  lang?: 'ja' | 'en'
}

const { 
  slot = 'auto',
  format = 'auto',
  className = '',
  lang = 'ja'
} = Astro.props

const clientId = import.meta.env.PUBLIC_ADSENSE_CLIENT_ID || 'ca-pub-your-adsense-id'
const isDev = import.meta.env.DEV

// é–‹ç™ºç’°å¢ƒã§ã¯å®Ÿéš›ã®åºƒå‘Šã®ä»£ã‚ã‚Šã«ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã‚’è¡¨ç¤º
if (isDev) {
---

<div class={`bg-gray-100 border-2 border-dashed border-gray-300 rounded-lg p-8 text-center ${className}`}>
  <div class="text-gray-500">
    <div class="text-2xl mb-2">ğŸ“¢</div>
    <p class="font-medium">
      {lang === 'ja' ? 'Google AdSense åºƒå‘Š' : 'Google AdSense Ad'}
    </p>
    <p class="text-sm mt-1">
      {lang === 'ja' ? 'æœ¬ç•ªç’°å¢ƒã§è¡¨ç¤ºã•ã‚Œã¾ã™' : 'Will be displayed in production'}
    </p>
    <p class="text-xs text-gray-400 mt-2">
      Client: {clientId}<br />
      Slot: {slot}
    </p>
  </div>
</div>

---
} else {
---

<!-- Google AdSense åºƒå‘Š -->
<div class={className}>
  <ins 
    class="adsbygoogle"
    style="display:block"
    data-ad-client={clientId}
    data-ad-slot={slot}
    data-ad-format={format}
    data-full-width-responsive="true"
  ></ins>
</div>

<script>
  // AdSense ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å‹•çš„èª­ã¿è¾¼ã¿
  if (typeof window !== 'undefined' && !window.adsbygoogle) {
    const script = document.createElement('script')
    script.async = true
    script.crossOrigin = 'anonymous'
    script.src = `https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=${clientId}`
    document.head.appendChild(script)
  }
  
  // åºƒå‘Šã®åˆæœŸåŒ–
  ;(window.adsbygoogle = window.adsbygoogle || []).push({})
</script>

---
}