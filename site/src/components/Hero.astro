---
import { getUILabel, DEFAULT_LANGUAGE } from '../lib/i18n'
import SearchFilter from './SearchFilter.astro'

export interface Props {
  lang?: string
}

const { lang = DEFAULT_LANGUAGE } = Astro.props

const title = getUILabel(lang, 'heroTitle')
const subtitle = getUILabel(lang, 'heroSubtitle')
const ctaText = getUILabel(lang, 'readStories')
---

<section class="relative overflow-hidden min-h-[46vh] md:min-h-[52vh] flex items-center justify-center bg-white py-16 md:py-24">
  <!-- Hinomaru-inspired circle background -->
  <div class="absolute top-1/2 left-1/2 transform -translate-x-[58%] -translate-y-1/2 pointer-events-none hinomaru-container">
    <div class="w-full h-full rounded-full hinomaru-circle"></div>
  </div>
  
  <!-- Fade to white at bottom -->
  <div class="absolute inset-x-0 bottom-0 h-32 bg-gradient-to-t from-white to-transparent pointer-events-none"></div>

  <!-- Content -->
  <div class="relative max-w-5xl mx-auto px-4 text-center z-10">
    <h1 class="text-4xl md:text-6xl font-semibold tracking-wide text-gray-900 mb-4 drop-shadow-sm hero-title">
      {title}
    </h1>
    <p class="mt-2 text-base md:text-lg text-gray-600 max-w-3xl mx-auto leading-relaxed drop-shadow-sm hero-subtitle">
      {subtitle}
    </p>
  </div>

  <!-- Search Filter inside hero bottom area (first page only usage expected) -->
  <div class="absolute inset-x-0 bottom-2 md:bottom-6 z-10">
    <div class="max-w-4xl mx-auto px-4">
      <SearchFilter lang={lang} />
    </div>
  </div>
</section>

<style>
  /* Responsive Hinomaru container */
  .hinomaru-container {
    width: 95vw;
    height: 95vw;
    max-width: 880px;
    max-height: 880px;
  }
  
  /* Hinomaru-inspired solid circle with soft edge */
  .hinomaru-circle {
    /* Softer abstract circle, slightly left of center */
    background: radial-gradient(circle at 45% 50%, var(--theme-accent-weak) 0%, var(--theme-accent-weak) 55%, var(--theme-accent-fade) 75%, transparent 100%);
    filter: blur(0.5px);
    opacity: 0.75;
  }

  @media (prefers-reduced-motion: reduce) {
    * {
      animation: none !important;
    }
  }
  
  @keyframes spin-slow {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
  }
  
  @keyframes dash {
    0% { stroke-dashoffset: 0; }
    100% { stroke-dashoffset: 20; }
  }
  
  .animate-spin-slow {
    animation: spin-slow 60s linear infinite;
  }
  
  .animate-dash {
    animation: dash 3s linear infinite;
  }
  
  /* Japanese typography for hero section */
  .hero-title {
    font-family: 'Shippori Mincho', 'Noto Serif JP', serif;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  
  .hero-subtitle {
    font-family: 'Shippori Mincho', 'Noto Serif JP', serif;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  
  /* Professional typography enhancements */
  h1 {
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
</style>