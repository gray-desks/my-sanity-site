---
import { getUILabel, DEFAULT_LANGUAGE } from '../lib/i18n'
import { getPrefecturesForLanguage } from '../lib/prefectures'

export interface Props {
  lang?: string
}

const { lang = DEFAULT_LANGUAGE } = Astro.props

// ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ãƒ†ã‚­ã‚¹ãƒˆã®å®šç¾©
const searchPlaceholder = lang === 'en' ? 'Search by keywords' :
                         lang === 'zh-cn' ? 'æŒ‰å…³é”®è¯æœç´¢' :
                         lang === 'zh-tw' ? 'æŒ‰é—œéµè©æœç´¢' :
                         lang === 'ko' ? 'í‚¤ì›Œë“œë¡œ ê²€ìƒ‰' :
                         lang === 'th' ? 'à¸„à¹‰à¸™à¸«à¸²à¸”à¹‰à¸§à¸¢à¸„à¸³à¸ªà¸³à¸„à¸±à¸' :
                         lang === 'vi' ? 'TÃ¬m kiáº¿m báº±ng tá»« khÃ³a' :
                         lang === 'id' ? 'Cari dengan kata kunci' :
                         lang === 'ms' ? 'Cari dengan kata kunci' :
                         lang === 'tl' ? 'Maghanap gamit ang mga keyword' :
                         lang === 'fr' ? 'Rechercher par mots-clÃ©s' :
                         lang === 'de' ? 'Mit Stichworten suchen' :
                         lang === 'es' ? 'Buscar por palabras clave' :
                         lang === 'it' ? 'Cerca per parole chiave' :
                         lang === 'pt' ? 'Pesquisar por palavras-chave' :
                         lang === 'pt-br' ? 'Pesquisar por palavras-chave' :
                         lang === 'ru' ? 'ĞŸĞ¾Ğ¸ÑĞº Ğ¿Ğ¾ ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ğ¼ ÑĞ»Ğ¾Ğ²Ğ°Ğ¼' :
                         lang === 'ar' ? 'Ø§Ù„Ø¨Ø­Ø« Ø¨Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…ÙØªØ§Ø­ÙŠØ©' :
                         lang === 'hi' ? 'à¤•à¥€à¤µà¤°à¥à¤¡ à¤¸à¥‡ à¤–à¥‹à¤œà¥‡à¤‚' :
                         lang === 'tr' ? 'Anahtar kelimelerle ara' :
                         'ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§æ¤œç´¢'

// è¨˜äº‹ã‚¿ã‚¤ãƒ—ã®å®šç¾©
const articleTypes = [
  { value: '', label: getUILabel(lang, 'allTypes') },
  { value: 'spot', label: getUILabel(lang, 'spot') },
  { value: 'food', label: getUILabel(lang, 'food') },
  { value: 'transport', label: getUILabel(lang, 'transport') },
  { value: 'hotel', label: getUILabel(lang, 'hotel') },
  { value: 'note', label: getUILabel(lang, 'note') }
]

// å…¨47éƒ½é“åºœçœŒã®å®šç¾©ï¼ˆå¤šè¨€èªå¯¾å¿œï¼‰
const allPrefectures = getPrefecturesForLanguage(lang)
const prefectures = [
  { code: '', name: getUILabel(lang, 'allPrefectures') },
  ...allPrefectures.map(p => ({ code: p.code, name: p.name }))
]
---

<div class="rounded-xl border border-[var(--theme-accent)]/20 bg-white shadow-[0_1px_3px_rgba(0,0,0,0.06)] px-3 py-3 mb-8">
  <!-- Mobile: 2-tier layout -->
  <div class="block md:hidden space-y-3">
    <!-- Tier 1: Search + Button -->
    <div class="grid grid-cols-[1fr,auto] gap-2 items-center">
      <!-- Search Input -->
      <div class="relative">
        <input
          type="text"
          id="search-input"
          placeholder={searchPlaceholder}
          class="w-full h-12 pl-10 pr-4 text-sm placeholder:text-neutral-400 text-ink bg-white border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--theme-accent)] focus:border-transparent transition-all duration-200"
          aria-label="æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰å…¥åŠ›"
        />
        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
          <svg class="h-4 w-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
          </svg>
        </div>
      </div>
      
      <!-- Search Button -->
      <button
        id="search-button"
        class="h-12 px-4 bg-[var(--theme-accent)] text-white font-medium rounded-lg hover:bg-[var(--theme-accent)]/90 focus:outline-none focus:ring-2 focus:ring-[var(--theme-accent)] transition-all duration-200"
        aria-label="æ¤œç´¢å®Ÿè¡Œ"
      >
        <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
        </svg>
      </button>
    </div>

    <!-- Tier 2: Collapsible Filters -->
    <div class="relative">
      <!-- Filter Toggle Chip -->
      <div class="flex items-center justify-between mb-2">
        <span class="text-xs text-neutral-500">ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼</span>
        <button
          id="filter-toggle"
          class="inline-flex items-center gap-1 px-3 py-1 text-xs font-medium bg-[var(--theme-accent-weak)] text-[var(--theme-ink-strong)] rounded-full hover:brightness-95 transition-all"
          aria-label="ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼åˆ‡ã‚Šæ›¿ãˆ"
        >
          <svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path>
          </svg>
          <svg id="filter-icon" class="h-3 w-3 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
          </svg>
        </button>
      </div>
      
      <!-- Collapsible Filter Panel -->
      <div id="filter-panel" class="max-h-0 overflow-hidden transition-all duration-300 ease-in-out">
        <div class="space-y-3 pt-1">

          <!-- Type Filter -->
          <select
            id="type-filter"
            class="w-full pl-4 pr-10 py-2.5 text-sm text-ink bg-white border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--theme-accent)] focus:border-transparent transition-all duration-200 appearance-none cursor-pointer"
          >
            {articleTypes.map(type => (
              <option value={type.value}>{type.label}</option>
            ))}
          </select>
          
          <!-- Prefecture Filter -->
          <select
            id="prefecture-filter"
            class="w-full pl-4 pr-10 py-2.5 text-sm text-ink bg-white border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--theme-accent)] focus:border-transparent transition-all duration-200 appearance-none cursor-pointer"
          >
            {prefectures.map(prefecture => (
              <option value={prefecture.code}>{prefecture.name}</option>
            ))}
          </select>
          
          <!-- Reset Button -->
          <button
            id="reset-button"
            class="w-full py-2.5 bg-neutral-100 text-neutral-600 font-medium rounded-lg hover:bg-neutral-200 focus:outline-none focus:ring-2 focus:ring-neutral-400 transition-all duration-200"
          >
            {getUILabel(lang, 'reset')}
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Desktop: Original 3-column layout -->
  <div class="hidden md:flex flex-col lg:flex-row gap-4">

    <!-- Desktop Search Field -->
    <div class="flex-1">
      <div class="relative">
        <input
          type="text"
          id="search-input-desktop"
          placeholder={searchPlaceholder}
          class="w-full pl-12 pr-4 py-3 text-ink bg-base border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--theme-accent)] focus:border-transparent transition-all duration-200"
          aria-label="æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰å…¥åŠ›"
        />
        <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
          <svg class="h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
          </svg>
        </div>
      </div>
    </div>

    <!-- Desktop Filter Selects -->
    <div class="flex flex-col sm:flex-row gap-4 flex-shrink-0">
      <!-- Type Filter -->
      <select
        id="type-filter-desktop"
        class="w-full sm:w-auto pl-4 pr-10 py-3 text-ink bg-base border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--theme-accent)] focus:border-transparent transition-all duration-200 appearance-none cursor-pointer"
      >
        {articleTypes.map(type => (
          <option value={type.value}>{type.label}</option>
        ))}
      </select>
      
      <!-- Prefecture Filter -->
      <select
        id="prefecture-filter-desktop"
        class="w-full sm:w-auto pl-4 pr-10 py-3 text-ink bg-base border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--theme-accent)] focus:border-transparent transition-all duration-200 appearance-none cursor-pointer"
      >
        {prefectures.map(prefecture => (
          <option value={prefecture.code}>{prefecture.name}</option>
        ))}
      </select>
    </div>

    <!-- Desktop Buttons -->
    <div class="flex gap-2">
      <!-- Search Button -->
      <button
        id="search-button-desktop"
        class="px-6 py-3 bg-[var(--theme-accent)] text-white font-medium rounded-xl hover:bg-[var(--theme-accent)]/90 focus:outline-none focus:ring-2 focus:ring-[var(--theme-accent)] focus:ring-offset-2 transition-all duration-200 transform hover:scale-105"
      >
        <span class="hidden sm:inline">{getUILabel(lang, 'search')}</span>
        <svg class="h-5 w-5 sm:hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
        </svg>
      </button>
      
      <!-- Reset Button -->
      <button
        id="reset-button-desktop"
        class="px-4 py-3 bg-neutral-100 text-neutral-600 font-medium rounded-xl hover:bg-neutral-200 focus:outline-none focus:ring-2 focus:ring-neutral-400 focus:ring-offset-2 transition-all duration-200 transform hover:scale-105"
        title={getUILabel(lang, 'reset')}
      >
        <span class="hidden sm:inline">{getUILabel(lang, 'reset')}</span>
        <svg class="h-5 w-5 sm:hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
        </svg>
      </button>
    </div>
  </div>
</div>

<!-- ã‚«ã‚¹ã‚¿ãƒ çŸ¢å°ã‚¢ã‚¤ã‚³ãƒ³ã‚’CSSã§è¿½åŠ  -->
<style>
  /* selectãƒœãƒƒã‚¯ã‚¹ã®çŸ¢å°ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º */
  #type-filter, #prefecture-filter, #type-filter-desktop, #prefecture-filter-desktop {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
    background-position: right 0.75rem center;
    background-repeat: no-repeat;
    background-size: 1.5em 1.5em;
  }
  
  /* Filter panel max height when expanded */
  .filter-expanded {
    max-height: 320px !important;
  }
</style>

<script>
  const FILTER_STORAGE_KEY = 'blogFilterState';
  class SearchFilter {
    constructor() {
      // Mobile elements
      this.searchInput = document.getElementById('search-input') as HTMLInputElement
      this.typeFilter = document.getElementById('type-filter') as HTMLSelectElement
      this.prefectureFilter = document.getElementById('prefecture-filter') as HTMLSelectElement
      this.searchButton = document.getElementById('search-button') as HTMLButtonElement
      this.resetButton = document.getElementById('reset-button') as HTMLButtonElement
      
      // Desktop elements
      this.searchInputDesktop = document.getElementById('search-input-desktop') as HTMLInputElement
      this.typeFilterDesktop = document.getElementById('type-filter-desktop') as HTMLSelectElement
      this.prefectureFilterDesktop = document.getElementById('prefecture-filter-desktop') as HTMLSelectElement
      this.searchButtonDesktop = document.getElementById('search-button-desktop') as HTMLButtonElement
      this.resetButtonDesktop = document.getElementById('reset-button-desktop') as HTMLButtonElement
      
      // Mobile accordion elements
      this.filterToggle = document.getElementById('filter-toggle') as HTMLButtonElement
      this.filterPanel = document.getElementById('filter-panel') as HTMLDivElement
      this.filterIcon = document.getElementById('filter-icon') as SVGElement
      
      // ãƒšãƒ¼ã‚¸ãƒ³ã‚°å¯¾å¿œ: ç¾åœ¨ã®ãƒšãƒ¼ã‚¸ã®è¨˜äº‹ã®ã¿ã‚’å¯¾è±¡ã«ã™ã‚‹
      this.articles = Array.from(document.querySelectorAll('[data-article]'))
      this.totalArticles = this.articles.length
      
      this.bindEvents()
      // ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‹ã‚‰çŠ¶æ…‹ã‚’å¾©å…ƒ
      this.loadState()
      // å¾©å…ƒã—ãŸçŠ¶æ…‹ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã‚’å®Ÿè¡Œ
      this.filterArticles()
      
      // ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³æƒ…å ±ã®è¡¨ç¤ºæ›´æ–°
      this.updatePageInfo()
    }

    bindEvents() {
      // Mobile filter accordion toggle
      this.filterToggle?.addEventListener('click', () => this.toggleFilters())
      
      // Mobile events
      this.searchInput?.addEventListener('input', () => this.syncAndFilter())
      this.typeFilter?.addEventListener('change', () => this.syncAndFilter())
      this.prefectureFilter?.addEventListener('change', () => this.syncAndFilter())
      this.searchButton?.addEventListener('click', () => this.filterArticles())
      this.resetButton?.addEventListener('click', () => this.resetFilters())
      this.searchInput?.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
          this.filterArticles()
        }
      })
      
      // Desktop events
      this.searchInputDesktop?.addEventListener('input', () => this.syncAndFilter())
      this.typeFilterDesktop?.addEventListener('change', () => this.syncAndFilter())
      this.prefectureFilterDesktop?.addEventListener('change', () => this.syncAndFilter())
      this.searchButtonDesktop?.addEventListener('click', () => this.filterArticles())
      this.resetButtonDesktop?.addEventListener('click', () => this.resetFilters())
      this.searchInputDesktop?.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
          this.filterArticles()
        }
      })
    }
    
    toggleFilters() {
      if (this.filterPanel && this.filterIcon) {
        const isExpanded = this.filterPanel.classList.contains('filter-expanded')
        
        if (isExpanded) {
          this.filterPanel.classList.remove('filter-expanded')
          this.filterIcon.style.transform = 'rotate(0deg)'
        } else {
          this.filterPanel.classList.add('filter-expanded')
          this.filterIcon.style.transform = 'rotate(180deg)'
        }
      }
    }
    
    // Sync mobile and desktop inputs
    syncAndFilter() {
      this.syncInputs()
      this.filterArticles()
    }
    
    syncInputs() {
      // Sync search input
      const mobileValue = this.searchInput?.value || ''
      const desktopValue = this.searchInputDesktop?.value || ''
      
      if (mobileValue !== desktopValue) {
        if (this.searchInput) this.searchInput.value = desktopValue || mobileValue
        if (this.searchInputDesktop) this.searchInputDesktop.value = mobileValue || desktopValue
      }
      
      // Sync type filter
      const mobileType = this.typeFilter?.value || ''
      const desktopType = this.typeFilterDesktop?.value || ''
      
      if (mobileType !== desktopType) {
        if (this.typeFilter) this.typeFilter.value = desktopType || mobileType
        if (this.typeFilterDesktop) this.typeFilterDesktop.value = mobileType || desktopType
      }
      
      // Sync prefecture filter
      const mobilePrefecture = this.prefectureFilter?.value || ''
      const desktopPrefecture = this.prefectureFilterDesktop?.value || ''
      
      if (mobilePrefecture !== desktopPrefecture) {
        if (this.prefectureFilter) this.prefectureFilter.value = desktopPrefecture || mobilePrefecture
        if (this.prefectureFilterDesktop) this.prefectureFilterDesktop.value = mobilePrefecture || desktopPrefecture
      }
    }

    filterArticles() {
      // Get values from either mobile or desktop inputs
      const searchTerm = (this.searchInput?.value || this.searchInputDesktop?.value || '').toLowerCase()
      const selectedType = this.typeFilter?.value || this.typeFilterDesktop?.value || ''
      const selectedPrefecture = this.prefectureFilter?.value || this.prefectureFilterDesktop?.value || ''
      
      let visibleCount = 0
      
      this.articles.forEach((article) => {
        const element = article as HTMLElement
        const title = element.dataset.title?.toLowerCase() || ''
        const type = element.dataset.type || ''
        const placeName = element.dataset.placeName?.toLowerCase() || ''
        const prefecture = element.dataset.prefecture || ''
        const bodyText = element.dataset.bodyText?.toLowerCase() || ''
        
        const matchesSearch = !searchTerm || 
          title.includes(searchTerm) || 
          placeName.includes(searchTerm) ||
          bodyText.includes(searchTerm)
        
        const matchesType = !selectedType || type === selectedType
        const matchesPrefecture = !selectedPrefecture || prefecture === selectedPrefecture
        
        const shouldShow = matchesSearch && matchesType && matchesPrefecture
        
        if (shouldShow) {
          element.style.display = 'block'
          element.style.animation = 'fadeIn 0.3s ease-in-out'
          visibleCount++
        } else {
          element.style.display = 'none'
        }
      })
      
      // çµæœãŒ0ä»¶ã®å ´åˆã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
      this.updateNoResultsMessage(visibleCount)
      // çŠ¶æ…‹ã‚’ä¿å­˜
      this.saveState()
    }

    resetFilters() {
      // Reset mobile inputs
      if (this.searchInput) {
        this.searchInput.value = ''
      }
      if (this.typeFilter) {
        this.typeFilter.selectedIndex = 0
      }
      if (this.prefectureFilter) {
        this.prefectureFilter.selectedIndex = 0
      }
      
      // Reset desktop inputs
      if (this.searchInputDesktop) {
        this.searchInputDesktop.value = ''
      }
      if (this.typeFilterDesktop) {
        this.typeFilterDesktop.selectedIndex = 0
      }
      if (this.prefectureFilterDesktop) {
        this.prefectureFilterDesktop.selectedIndex = 0
      }
      
      // å…¨ã¦ã®è¨˜äº‹ã‚’è¡¨ç¤º
      this.articles.forEach((article) => {
        const element = article as HTMLElement
        element.style.display = 'block'
        element.style.animation = 'fadeIn 0.3s ease-in-out'
      })
      
      // ã€Œçµæœãªã—ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’éè¡¨ç¤º
      const noResultsEl = document.getElementById('no-results-message')
      if (noResultsEl) {
        noResultsEl.style.display = 'none'
      }
      // çŠ¶æ…‹ã‚’ä¿å­˜
      this.saveState()
    }

    saveState() {
      const payload = {
        searchTerm: this.searchInput?.value || this.searchInputDesktop?.value || '',
        selectedType: this.typeFilter?.value || this.typeFilterDesktop?.value || '',
        selectedPrefecture: this.prefectureFilter?.value || this.prefectureFilterDesktop?.value || ''
      }
      sessionStorage.setItem(FILTER_STORAGE_KEY, JSON.stringify(payload))
    }

    loadState() {
      try {
        const saved = JSON.parse(sessionStorage.getItem(FILTER_STORAGE_KEY) || '{}')
        
        // Load into both mobile and desktop inputs
        if (saved.searchTerm !== undefined) {
          if (this.searchInput) this.searchInput.value = saved.searchTerm
          if (this.searchInputDesktop) this.searchInputDesktop.value = saved.searchTerm
        }
        if (saved.selectedType !== undefined) {
          if (this.typeFilter) this.typeFilter.value = saved.selectedType
          if (this.typeFilterDesktop) this.typeFilterDesktop.value = saved.selectedType
        }
        if (saved.selectedPrefecture !== undefined) {
          if (this.prefectureFilter) this.prefectureFilter.value = saved.selectedPrefecture
          if (this.prefectureFilterDesktop) this.prefectureFilterDesktop.value = saved.selectedPrefecture
        }
      } catch (e) {
        console.error('Failed to load filter state', e)
      }
    }

    updatePageInfo() {
      // ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³å¯¾å¿œ: ç¾åœ¨ãƒšãƒ¼ã‚¸ã®è¨˜äº‹æ•°æƒ…å ±ã‚’è¡¨ç¤º
      const pageInfoEl = document.getElementById('page-info')
      if (pageInfoEl) {
        const currentLang = document.documentElement.lang || 'ja'
        const infoText = currentLang === 'en' 
          ? `Showing ${this.totalArticles} articles on this page`
          : `ã“ã®ãƒšãƒ¼ã‚¸ã«${this.totalArticles}ä»¶ã®è¨˜äº‹ãŒã‚ã‚Šã¾ã™`
        pageInfoEl.textContent = infoText
      }
    }

    updateNoResultsMessage(visibleCount: number) {
      let noResultsEl = document.getElementById('no-results-message')
      
      if (visibleCount === 0) {
        if (!noResultsEl) {
          noResultsEl = document.createElement('div')
          noResultsEl.id = 'no-results-message'
          noResultsEl.className = 'text-center py-16 bg-white rounded-2xl shadow-lg border border-gray-100'
          const noResultsTitle = {
            'ja': 'ã“ã®ãƒšãƒ¼ã‚¸ã«è©²å½“ã™ã‚‹è¨˜äº‹ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ',
            'en': 'No matching articles found on this page',
            'zh-cn': 'åœ¨æ­¤é¡µé¢æœªæ‰¾åˆ°åŒ¹é…çš„æ–‡ç« ',
            'zh-tw': 'åœ¨æ­¤é é¢æœªæ‰¾åˆ°ç¬¦åˆçš„æ–‡ç« ',
            'ko': 'ì´ í˜ì´ì§€ì—ì„œ ì¼ì¹˜í•˜ëŠ” ê¸°ì‚¬ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤',
            'th': 'à¹„à¸¡à¹ˆà¸à¸šà¸šà¸—à¸„à¸§à¸²à¸¡à¸—à¸µà¹ˆà¸•à¸£à¸‡à¸à¸±à¸™à¹ƒà¸™à¸«à¸™à¹‰à¸²à¸™à¸µà¹‰',
            'vi': 'KhÃ´ng tÃ¬m tháº¥y bÃ i viáº¿t phÃ¹ há»£p trÃªn trang nÃ y',
            'id': 'Tidak ditemukan artikel yang cocok di halaman ini',
            'ms': 'Tiada artikel yang sepadan ditemui di halaman ini',
            'tl': 'Walang nahanap na tugmang artikulo sa page na ito',
            'fr': 'Aucun article correspondant trouvÃ© sur cette page',
            'de': 'Keine passenden Artikel auf dieser Seite gefunden',
            'es': 'No se encontraron artÃ­culos coincidentes en esta pÃ¡gina',
            'it': 'Nessun articolo corrispondente trovato in questa pagina',
            'pt': 'Nenhum artigo correspondente encontrado nesta pÃ¡gina',
            'ru': 'ĞĞ° ÑÑ‚Ğ¾Ğ¹ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğµ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ¾ Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´ÑÑ‰Ğ¸Ñ… ÑÑ‚Ğ°Ñ‚ĞµĞ¹',
            'ar': 'Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ù‚Ø§Ù„Ø§Øª Ù…Ø·Ø§Ø¨Ù‚Ø© ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø©',
            'hi': 'à¤‡à¤¸ à¤ªà¥ƒà¤·à¥à¤  à¤ªà¤° à¤•à¥‹à¤ˆ à¤®à¥‡à¤² à¤–à¤¾à¤¤à¤¾ à¤²à¥‡à¤– à¤¨à¤¹à¥€à¤‚ à¤®à¤¿à¤²à¤¾',
            'tr': 'Bu sayfada eÅŸleÅŸen makale bulunamadÄ±',
            'pt-br': 'Nenhum artigo correspondente encontrado nesta pÃ¡gina'
          }
          
          const noResultsSubtitle = {
            'ja': 'ä»–ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’è©¦ã™ã‹ã€åˆ¥ã®ãƒšãƒ¼ã‚¸ã‚’ã”ç¢ºèªãã ã•ã„',
            'en': 'Try different keywords or check other pages',
            'zh-cn': 'è¯·å°è¯•å…¶ä»–å…³é”®è¯æˆ–æŸ¥çœ‹å…¶ä»–é¡µé¢',
            'zh-tw': 'è«‹å˜—è©¦å…¶ä»–é—œéµè©æˆ–æŸ¥çœ‹å…¶ä»–é é¢',
            'ko': 'ë‹¤ë¥¸ í‚¤ì›Œë“œë¥¼ ì‹œë„í•˜ê±°ë‚˜ ë‹¤ë¥¸ í˜ì´ì§€ë¥¼ í™•ì¸í•˜ì„¸ìš”',
            'th': 'à¸¥à¸­à¸‡à¸„à¸³à¸­à¸·à¹ˆà¸™à¸«à¸£à¸·à¸­à¸”à¸¹à¸«à¸™à¹‰à¸²à¸­à¸·à¹ˆà¸™',
            'vi': 'Thá»­ tá»« khÃ³a khÃ¡c hoáº·c kiá»ƒm tra trang khÃ¡c',
            'id': 'Coba kata kunci lain atau periksa halaman lain',
            'ms': 'Cuba kata kunci lain atau semak halaman lain',
            'tl': 'Subukan ang ibang keyword o tingnan ang ibang page',
            'fr': 'Essayez d\'autres mots-clÃ©s ou consultez d\'autres pages',
            'de': 'Versuchen Sie andere Suchbegriffe oder andere Seiten',
            'es': 'Intenta con otras palabras clave o revisa otras pÃ¡ginas',
            'it': 'Prova altre parole chiave o controlla altre pagine',
            'pt': 'Tente outras palavras-chave ou verifique outras pÃ¡ginas',
            'ru': 'ĞŸĞ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹Ñ‚Ğµ Ğ´Ñ€ÑƒĞ³Ğ¸Ğµ ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ ÑĞ»Ğ¾Ğ²Ğ° Ğ¸Ğ»Ğ¸ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ Ğ´Ñ€ÑƒĞ³Ğ¸Ğµ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹',
            'ar': 'Ø¬Ø±Ø¨ ÙƒÙ„Ù…Ø§Øª Ù…ÙØªØ§Ø­ÙŠØ© Ø£Ø®Ø±Ù‰ Ø£Ùˆ ØªØ­Ù‚Ù‚ Ù…Ù† ØµÙØ­Ø§Øª Ø£Ø®Ø±Ù‰',
            'hi': 'à¤…à¤¨à¥à¤¯ à¤•à¥€à¤µà¤°à¥à¤¡ à¤†à¤œà¤¼à¤®à¤¾à¤à¤‚ à¤¯à¤¾ à¤…à¤¨à¥à¤¯ à¤ªà¥ƒà¤·à¥à¤  à¤¦à¥‡à¤–à¥‡à¤‚',
            'tr': 'BaÅŸka anahtar kelimeler deneyin veya diÄŸer sayfalarÄ± kontrol edin',
            'pt-br': 'Tente outras palavras-chave ou verifique outras pÃ¡ginas'
          }
          
          const currentLang = document.documentElement.lang || 'ja'
          
          noResultsEl.innerHTML = `
            <div class="text-6xl mb-4">ğŸ”</div>
            <p class="text-gray-500 text-xl mb-2">${noResultsTitle[currentLang] || noResultsTitle['ja']}</p>
            <p class="text-gray-400">${noResultsSubtitle[currentLang] || noResultsSubtitle['ja']}</p>
          `
          
          const articlesContainer = document.querySelector('#articles .grid')
          articlesContainer?.parentNode?.appendChild(noResultsEl)
        }
        noResultsEl.style.display = 'block'
      } else {
        if (noResultsEl) {
          noResultsEl.style.display = 'none'
        }
      }
    }
  }

  // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«åˆæœŸåŒ–
  document.addEventListener('DOMContentLoaded', () => {
    new SearchFilter()
  })
</script>

<style>
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>